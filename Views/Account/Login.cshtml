@{
    ViewBag.Title = "Login";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Include SweetAlert2 CSS -->
<link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet" />

<section class="h-100" style="margin-top:60px">
    <div class="container-fluid">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <!-- Left Image -->
            <div class="col-md-9 col-lg-6 col-xl-5">
                <img src="https://thumbs.dreamstime.com/b/bookshop-bookstore-building-facade-row-books-window-vector-illustration-99251970.jpg"
                     class="img-fluid" alt="Sample image">
            </div>
            <!-- Login Form -->
            <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
                @using (Html.BeginForm("Login", "Account", FormMethod.Post))
                {
                    <div class="d-flex flex-row align-items-center justify-content-center justify-content-lg-start">
                        <p class="lead fw-normal mb-4 me-3">Sign in with your account</p>
                    </div>

                    <!-- Display error message if login fails -->
                    if (!string.IsNullOrEmpty(ViewBag.ErrorMessage as string))
                    {
                        <div class="alert alert-danger" role="alert">
                            @ViewBag.ErrorMessage
                        </div>
                    }

                    <!-- Admin Checkbox -->
                    <div class="form-check mb-3">
                        <input type="checkbox" id="isAdmin" class="form-check-input" name="IsAdmin" value="true" />
                        <label for="isAdmin" class="form-check-label">Login as Admin</label>
                    </div>

                    <!-- Username Input -->
                    <div class="form-outline mb-4">
                        @Html.TextBox("Username", null, new { @class = "form-control form-control-lg", placeholder = "Enter your username", id = "usernameField" })
                        <label class="form-label" for="Username">Username</label>
                    </div>

                    <!-- Password Input -->
                    <div class="form-outline mb-3">
                        @Html.Password("Password", null, new { @class = "form-control form-control-lg", placeholder = "Enter your password", id = "passwordField" })
                        <label class="form-label" for="Password">Password</label>
                    </div>

                    <div class="d-flex justify-content-between align-items-center">
                        <!-- Remember Me -->
                        <div class="form-check mb-0">
                            <input class="form-check-input me-2" type="checkbox" id="RememberMe" />
                            <label class="form-check-label" for="RememberMe">Remember me</label>
                        </div>
                        <a href="#!" class="text-body">Forgot password?</a>
                    </div>

                    <div class="text-center text-lg-start mt-4 pt-2">
                        <button type="submit" class="btn btn-primary btn-lg"
                                style="padding-left: 2.5rem; padding-right: 2.5rem;">
                            Login
                        </button>

                        <p class="small fw-bold mt-2 pt-1 mb-0 mt-4" id="registerCustomerLink">
                            Don't have an account? <a href="@Url.Action("Register", "Account")" class="link-danger">Register</a>
                        </p>
                        <p class="small fw-bold mt-2 pt-1 mb-0 mt-4" id="registerAdminLink">
                            Want to be an admin? <a href="@Url.Action("RegisterAdmin", "Account")" class="link-danger">Register as Admin</a>
                        </p>
                    </div>
                }
            </div>
        </div>
    </div>
</section>

<!-- Include SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    // JavaScript to dynamically update placeholders based on admin checkbox
    const adminCheckbox = document.getElementById('isAdmin');
    const registerAdminLink = document.getElementById('registerAdminLink');
    const registerCustomerLink = document.getElementById('registerCustomerLink');
    const usernameField = document.getElementById('usernameField');
    const passwordField = document.getElementById('passwordField');

    adminCheckbox.addEventListener('change', () => {
        if (adminCheckbox.checked) {
            usernameField.placeholder = "Enter admin username";
            passwordField.placeholder = "Enter admin password";
        } else {
            usernameField.placeholder = "Enter your username";
            passwordField.placeholder = "Enter your password";
        }
    });

    registerAdminLink.style.display = "none";
    adminCheckbox.addEventListener('change', () => {
        if (adminCheckbox.checked) {
            registerAdminLink.style.display = "block";
            registerCustomerLink.style.display = "none";
        } else {
            registerAdminLink.style.display = "none";
            registerCustomerLink.style.display = "block";
        }
    });
</script>

@{ var logoutmessage = TempData["logoutMessage"] as string; }

@if (!string.IsNullOrEmpty(logoutmessage))
{
    <script>
        Swal.fire({
            icon: 'success',
            title: 'Log Out',
            text: '@logoutmessage',
            timer: 1000,  // Automatically closes after 3 seconds
            //timerProgressBar: true,
            showConfirmButton: false
        });
    </script>
}